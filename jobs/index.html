<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin.ai Jobs</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0c0e; --panel:#0a0d10; --line:#1b2025; --head:#0d1115; --mono:#cfe7e7; --muted:#7d8a96; --accent:#00ffff;
    }
    html,body{height:100%}
    body { margin:0; font-family:"IBM Plex Mono", monospace; background:var(--bg); color:var(--mono); display:flex; align-items:center; justify-content:center; min-height:100vh; }
    .hero-terminal { background:var(--panel); border:1px solid var(--line); border-radius:12px; overflow:hidden; width:92%; max-width:900px; box-shadow:0 10px 40px rgba(0,0,0,.35); }
    .term-head { display:flex; align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid #151a1f; background:var(--head); }
    .dot { width:10px; height:10px; border-radius:50%; background:#2a2f35; }
    .badge { font-size:11px; color:var(--muted); border:1px solid #262c33; padding:4px 8px; border-radius:6px; display:inline-block; }
    .term-body { font-size:14px; padding:14px 16px; white-space:pre-wrap; line-height:1.35; max-height:360px; overflow-y:auto; }
    .row{ display:flex; gap:8px; align-items:baseline; margin:0 0 4px; }
    .ts{ color:#80919a; opacity:.85; font-size:12px; }
    .prompt{ color:var(--accent); }
    .caret{ display:inline-block; width:8px; height:1.05em; background:var(--accent); vertical-align:-2px; animation:blink 1.1s steps(1) infinite; }
    @keyframes blink{ 50%{ opacity:0 } }
  </style>
</head>
<body>
  <div class="hero-terminal" id="term">
    <div class="term-head">
      <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      <span class="badge">/usr/local/admin/jobs</span>
    </div>
    <div class="term-body" id="out" aria-label="terminal"></div>
  </div>

  <script>
    const out = document.getElementById('out');
    const pad = (n,w=2)=>String(n).padStart(w,'0');
    const ts  = ()=>{ const d=new Date(); return `${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}.${pad(d.getMilliseconds(),3)}`; };

    function addRow(text, withPrompt=false){
      const row = document.createElement('div'); row.className='row';
      const t = document.createElement('span'); t.className='ts'; t.textContent = ts(); row.appendChild(t);
      if(withPrompt){ const p=document.createElement('span'); p.className='prompt'; p.textContent='$ '; row.appendChild(p); }
      const c = document.createElement('span'); row.appendChild(c);
      out.appendChild(row);
      out.scrollTop = out.scrollHeight;
      return c;
    }

    function typeInto(el, text, speed=18){
      return new Promise(res=>{
        let i=0; const tick=()=>{ 
          if(i<text.length){ el.textContent += text.charAt(i++); setTimeout(tick, speed); }
          else res();
        }; tick();
      });
    }

    async function printJob(title, location){
      const l = addRow('', true);
      await typeInto(l, `job/open ${title} â€” ${location||"Unknown"}`);
    }

    async function run(){
      const l1 = addRow('', true);
      await typeInto(l1, "fetching jobs...");
      try {
        const res = await fetch("https://api.teamtailor.com/v1/jobs", {
          headers: {
            "Authorization": "Token token=Rl7gCDodqn5sf8QGEttPHBlAlLL3cKfKkRzuHfvR",
            "X-Api-Version": "20240401",
            "Content-Type": "application/vnd.api+json"
          }
        });
        const data = await res.json();
        if(data.data){
          for(const job of data.data){
            const attrs = job.attributes;
            await printJob(attrs.title, attrs.location);
          }
        } else {
          const err = addRow('', true);
          err.textContent = "no jobs found";
        }
      } catch(e){
        const err = addRow('', true);
        err.textContent = "API error: " + e;
      }
      const caretRow = addRow('', true);
      const caret = document.createElement('span'); caret.className='caret'; caretRow.appendChild(caret);
    }

    run();
  </script>
</body>
</html>
